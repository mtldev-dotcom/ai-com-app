---
alwaysApply: true
---
# Cursor / Claude Code Rules â€“ AI Eâ€‘Commerce Management Project

These rules define how AI coding agents (Cursor, Claude Code, or others) must operate during the build of **AI Eâ€‘Commerce Management** â€” the Nick a Deal Admin Tool.

---

## ğŸ§­ Repository Structure

All agents **must respect the project structure** and place files in the correct directories.

### Root Layout

```
/ (repo root)
â”‚
â”œâ”€â”€ docs/             # ğŸ“˜ Markdown documentation (PRDs, build plans, notes)
â”‚   â”œâ”€â”€ prd.md
â”‚   â”œâ”€â”€ step-guide.md
â”‚   â”œâ”€â”€ cursor-rules.md
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ .dev/             # ğŸ§ª Internal development notes and temp assets
â”‚   â”œâ”€â”€ images/       # Screenshots, design refs, drafts
â”‚   â”œâ”€â”€ notes.md
â”‚   â””â”€â”€ ...
â”‚   â†’ Agents must IGNORE this folder (never commit code or reference paths here)
â”‚
â”œâ”€â”€ ai-com-app/       # ğŸ§  Next.js 15 main app
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â”œâ”€â”€ workers/
â”‚   â”‚   â””â”€â”€ types/
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ next.config.js
â”‚   â””â”€â”€ tsconfig.json
â”‚
â””â”€â”€ docker-compose.yml  # (added later)
```

> ğŸ§© **Always verify folder path before file creation.** Never create stray files at root or misplace code inside `/docs` or `/.dev`.

---

## ğŸ§± Development Environment Rules

* **OS:** Windows 11 (primary). Use only Windowsâ€‘compatible shell syntax.

  * âŒ Do **not** chain commands with `&&`.
  * âœ… Use one command per line or write explicit scripts inside `package.json`.
* Never assume `bash`, `zsh`, or Unixâ€‘specific utilities are available.
* Always use **crossâ€‘platform Node commands**.

---

## ğŸš« Permission Restrictions

AI agents **must not** execute or commit commands autonomously.

### Forbidden Without User Approval

| Action                     | Example                                  |
| -------------------------- | ---------------------------------------- |
| Start Dev Server           | `npm run dev`                            |
| Build Project              | `npm run build`                          |
| Database Reset or Deletion | `prisma migrate reset`, `dropdb`, etc.   |
| Package Install            | `npm install` / `pnpm add`               |
| Container Ops              | `docker compose up`, `docker exec`, etc. |
| File Deletion              | `rm -rf`, `del`, etc.                    |

> Only create the **code and configuration files** needed. Let the user run or execute commands manually.

---

## ğŸ§© Coding Guidelines

1. **Work one step at a time** â€” follow the active task in `docs/step-guide.md`.
2. **Never go beyond the assigned step**. If unsure, stop and ask.
3. **Use TypeScript and Zod** for all data validation.
4. **Naming Conventions**

   * Components: `PascalCase`
   * Hooks/Functions: `camelCase`
   * Files: `kebab-case.tsx` or `.ts`
   * Constants: `UPPER_SNAKE_CASE`
5. **Comment functions** with JSDoc: purpose, params, return type.
6. **Import paths** must use the alias `@/` for `src/`.
7. **Organize by domain** â€” drafts, imports, ai, suppliers, etc.
8. **UI Consistency:** Use Shadcn components; never inline large Tailwind blocks without reason.
9. **Error Handling:** Use try/catch in all async server actions.
10. **Testing:** After each step, verify testing checklist in PRD before continuing.

---

## ğŸ§° File & Commit Policy

* **One feature = one commit.**
* Commit message format: `feat(step-3): dashboard layout` or `fix(step-2): orm migration error`.
* Do **not** commit generated `.env` files or secrets.
* Keep commits minimal and isolated.

---

## ğŸ§ª Testing Rules

* Always create a minimal **Testing Flow** for every new feature (see `step-guide.md`).
* Never skip manual validation steps like â€œRun migration â†’ verify table.â€
* Automated tests must live under `ai-com-app/src/__tests__/`.

---

## ğŸ§© Communication & Behavior

* When responding, agents should:

  * âœ… Summarize what was done.
  * âœ… List files modified.
  * âœ… List testing steps.
  * ğŸš« Never generate unrelated code.
  * ğŸš« Never optimize or refactor outside the assigned task.

---

## ğŸªª Identity & Context

* Project codename: **AI Eâ€‘Commerce Management** (placeholder name; may change later).
* Built for **Nick a Deal** ecosystem.
* Next.js 15 + Supabase + Shadcn + Redis (BullMQ) stack.

---

## âœ… Summary of Obedience Rules

| Rule                                 | Must Follow |
| ------------------------------------ | ----------- |
| Work only within active step         | âœ…           |
| Place code in correct directories    | âœ…           |
| Ask before running or committing     | âœ…           |
| Use Windowsâ€‘compatible commands only | âœ…           |
| Keep commits atomic                  | âœ…           |
| Never touch `.dev/` folder           | âœ…           |
| Always confirm Testing Flow          | âœ…           |

---

